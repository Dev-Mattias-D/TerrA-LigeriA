<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <style type="text/css">
        body {
            padding: 0;
            margin: 0;
        }
    </style>

    <title>Hologramme</title>
</head>

<body>

</body>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video</title>

</head>

<body>
    <div class="img">

        <img src="/decoupe/video_000.jpg" alt="">

    </div>
    <script src='/js/socketio.js'></script>
    <script>
        window.onload = () => {
            const socket = io();

            socket.on("connect", () => {
                console.log("ConnectÃ©");
            })

            // 1/30 pour 30 FPS
            let frameTime = 1 / 30;

            const nbImage = 299;
            const ImagePerAngle = nbImage / 360;

            socket.on('hologramme', (data) => {
                let angle = data.value;
                let imageToShow = Math.round(angle * ImagePerAngle);
                let formatImage = "";
                if (imageToShow < 10) {
                    formatImage = "00" + imageToShow;
                } else if (imageToShow < 100) {
                    formatImage = "0" + imageToShow;
                } else {
                    formatImage = "" + imageToShow;
                }
                document.querySelector('img').src = '/decoupe/video_' + formatImage + '.jpg'
            })

        }
    </script>
</body>

</html>