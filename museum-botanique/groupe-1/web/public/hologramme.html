<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <style type="text/css">
        body {
            padding: 0;
            margin: 0;
        }
    </style>

    <title>Hologramme</title>
</head>

<body>

</body>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video</title>

</head>

<body style="margin: 0; padding: 0; background-color: black;">


    <div class="img" style="transform: rotate(90deg);">

        <img src="/decoupe/video_000.jpg" alt="" style="width: 100%;">

    </div>
    <script src='/js/socketio.js'></script>
    <script>
        window.onload = () => {
            const socket = io();

            socket.on("connect", () => {
                console.log("Connect√©");
            })

            // 1/30 pour 30 FPS
            let frameTime = 1 / 30;

            const nbImageOnithopus = 250;
            const nbImageAngelica = 240;

            const ImagePerAngleOnithopus = nbImageOnithopus / 360;
            const ImagePerAngleAngelica = nbImageAngelica / 360;

            let imagesOrni = [];
            let imagesAngelica = [];

            for (let i = 0; i < nbImageOnithopus; i++) {
                let numImg = "";
                let img = new Image(1920, 1080);
                const basePathOrni = 'images/hologramme/ornithopus/';

                if (i < 10) {
                    numImg = "000" + i;
                } else if (i < 100) {
                    numImg = "00" + i;
                } else if (i < 1000) {
                    numImg = "0" + i;
                } else {
                    numImg = "" + i;
                }

                img.src = basePathOrni + numImg + '.png';
                imagesOrni.push(img);
            }

            for (let i = 0; i < nbImageAngelica; i++) {
                let numImg = "";
                let img = new Image(1920, 1080);
                const basePathAngelica = 'images/hologramme/angelica/';

                if (i < 10) {
                    numImg = "000" + i;
                } else if (i < 100) {
                    numImg = "00" + i;
                } else if (i < 1000) {
                    numImg = "0" + i;
                } else {
                    numImg = "" + i;
                }

                img.src = basePathAngelica + numImg + '.png';
                imagesAngelica.push(img);
            }

            socket.on('hologramme', (data) => {
                let angle = data.value;
                let numImageToShow = Math.round(angle * ImagePerAngleAngelica);
                document.querySelector('img').src = imagesAngelica[numImageToShow].src;
            })
        }
    </script>
</body>

</html>